"use strict";var k=Object.create;var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var l=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var w=(e,o,i,m)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of j(o))!_.call(e,t)&&t!==i&&u(e,t,{get:()=>o[t],enumerable:!(m=g(o,t))||m.enumerable});return e};var r=(e,o,i)=>(i=e!=null?k(l(e)):{},w(o||!e||!e.__esModule?u(i,"default",{value:e,enumerable:!0}):i,e));var c=r(require("express")),n=r(require("body-parser")),d=r(require("cors")),f=r(require("morgan")),a=r(require("./controllers/jwks")),p=r(require("./controllers/device")),v=r(require("./controllers/user"));const s=(0,c.default)();s.set("port",process.env.PORT||3e3),s.set("host",process.env.HOST||"127.0.0.1"),s.set("json spaces",process.env.NODE_ENV==="production"?0:2),s.use(n.default.json()),s.use(n.default.urlencoded({extended:!1})),s.use(c.default.json()),s.use((0,f.default)(process.env.NODE_ENV==="production"?"combined":"dev")),s.use((0,d.default)()),s.post("/api/v1/device/issue",p.issue),s.post("/api/v1/device/refresh",p.issue),s.post("/api/v1/device/mock_issue",p.mock_issue),s.post("/api/v1/user/issue",v.issue),s.post("/api/v1/user/mock_issue",v.mock_issue),s.get("/powix.jwks",a.jwk),s.get("/api/v1/config",a.config);const x=async()=>{try{s.listen(3e3,()=>{console.log("Server started on port 3000")})}catch(e){console.error(e),process.exit(1)}};x();
//# sourceMappingURL=index.js.map
